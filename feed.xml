<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://ahmed-o-aly.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://ahmed-o-aly.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-11-29T18:35:32+00:00</updated><id>https://ahmed-o-aly.github.io/feed.xml</id><title type="html">Ahmed Aly</title><subtitle>Operations research, energy systems, and applied optimization. </subtitle><entry><title type="html">TerritoryDesign: Probabilistic VNS for Delivery Territory Design</title><link href="https://ahmed-o-aly.github.io/blog/2025/territory-design-bvns/" rel="alternate" type="text/html" title="TerritoryDesign: Probabilistic VNS for Delivery Territory Design"/><published>2025-11-29T00:00:00+00:00</published><updated>2025-11-29T00:00:00+00:00</updated><id>https://ahmed-o-aly.github.io/blog/2025/territory-design-bvns</id><content type="html" xml:base="https://ahmed-o-aly.github.io/blog/2025/territory-design-bvns/"><![CDATA[<div style="text-align: center; margin-bottom: 1rem;"> <img src="/assets/img/output.png" alt="Plotted BVNS districts" style="max-width: 420px; width: 80%; height: auto;"/> </div> <p>I open-sourced the code and datasets that accompany our paper <em>“An efficient probability-based VNS algorithm for delivery territory design”</em> (Computers &amp; Operations Research, 2024). The repo lives at <a href="https://github.com/ahmed-o-aly/TerritoryDesign">github.com/ahmed-o-aly/TerritoryDesign</a> and packages:</p> <ul> <li>A probabilistic BVNS implementation with tailored shaking, merit functions, and path relinking.</li> <li>120 graph instances (planar and grid-derived) in GraphML, matching the benchmarks from the paper.</li> <li>Experiment logs (BVNS, PR, and MIP baselines) and the notebook used to generate new instances.</li> <li>Citation metadata (<code class="language-plaintext highlighter-rouge">CITATION.cff</code>) so you can cite the artifacts directly.</li> </ul> <h2 id="quick-start">Quick start</h2> <p>The code runs on Python 3.9+ with light dependencies:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>networkx numpy scipy pandas matplotlib jupyter
</code></pre></div></div> <p>Load an instance and run BVNS:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">networkx</span> <span class="k">as</span> <span class="n">nx</span>
<span class="kn">from</span> <span class="n">DTDPAlgorithms</span> <span class="kn">import</span> <span class="n">TerritoryDesignProblem</span><span class="p">,</span> <span class="n">BVNS</span>

<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="p">.</span><span class="nf">read_graphml</span><span class="p">(</span><span class="sh">"</span><span class="s">TGraphInstances/planar500_G0.graphml</span><span class="sh">"</span><span class="p">)</span>

<span class="n">tdp</span> <span class="o">=</span> <span class="nc">TerritoryDesignProblem</span><span class="p">(</span>
    <span class="n">graph_input</span><span class="o">=</span><span class="n">G</span><span class="p">,</span>
    <span class="n">delta</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>          <span class="c1"># balance tolerance
</span>    <span class="n">llambda</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>         <span class="c1"># objective vs. balance weight
</span>    <span class="n">rcl_parameter</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>   <span class="c1"># restricted candidate list threshold
</span>    <span class="n">nr_districts</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>

<span class="n">bvns</span> <span class="o">=</span> <span class="nc">BVNS</span><span class="p">(</span><span class="n">tdp_instance</span><span class="o">=</span><span class="n">tdp</span><span class="p">,</span> <span class="n">shaking_steps</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fail_max</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">nrInitSolutions</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">obj_hist</span><span class="p">,</span> <span class="n">inf_hist</span><span class="p">,</span> <span class="n">best_solution</span><span class="p">,</span> <span class="n">timeline</span> <span class="o">=</span> <span class="n">bvns</span><span class="p">.</span><span class="nf">performBVNS</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Best objective:</span><span class="sh">"</span><span class="p">,</span> <span class="n">obj_hist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="sh">"</span><span class="s">Infeasibility:</span><span class="sh">"</span><span class="p">,</span> <span class="n">inf_hist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></div> <p>To visualize districts:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">networkx</span> <span class="k">as</span> <span class="n">nx</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">matplotlib.cm</span> <span class="k">as</span> <span class="n">cm</span>

<span class="k">def</span> <span class="nf">plot_districts</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">districts</span><span class="p">):</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="nf">float</span><span class="p">(</span><span class="n">G</span><span class="p">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">]),</span> <span class="nf">float</span><span class="p">(</span><span class="n">G</span><span class="p">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">G</span><span class="p">.</span><span class="n">nodes</span>
    <span class="p">}</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="n">cm</span><span class="p">.</span><span class="nf">get_cmap</span><span class="p">(</span><span class="sh">"</span><span class="s">tab20</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">nodes</span> <span class="ow">in</span> <span class="n">districts</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
        <span class="n">nx</span><span class="p">.</span><span class="nf">draw_networkx_nodes</span><span class="p">(</span>
            <span class="n">G</span><span class="p">,</span>
            <span class="n">pos</span><span class="p">,</span>
            <span class="n">nodelist</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span>
            <span class="n">node_color</span><span class="o">=</span><span class="p">[</span><span class="nf">palette</span><span class="p">(</span><span class="n">k</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)],</span>
            <span class="n">node_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">nx</span><span class="p">.</span><span class="nf">draw_networkx_edges</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">axis</span><span class="p">(</span><span class="sh">"</span><span class="s">off</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="n">districts</span> <span class="o">=</span> <span class="n">best_solution</span> <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">best_solution</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="n">best_solution</span><span class="p">[</span><span class="sh">"</span><span class="s">Districts</span><span class="sh">"</span><span class="p">]</span>
<span class="nf">plot_districts</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">districts</span><span class="p">)</span>
</code></pre></div></div> <h2 id="whats-inside">What’s inside</h2> <ul> <li><code class="language-plaintext highlighter-rouge">DTDPAlgorithms.py</code>: construction heuristics, local search, BVNS, and path relinking.</li> <li><code class="language-plaintext highlighter-rouge">TGraphInstances/</code> &amp; <code class="language-plaintext highlighter-rouge">GGraphInstances/newGeneratedInstances/</code>: 120 benchmarks (500–726 nodes).</li> <li><code class="language-plaintext highlighter-rouge">Results/</code>: JSON timelines for VNS/PR/MIP experiments.</li> <li><code class="language-plaintext highlighter-rouge">generateGraphs.ipynb</code>: notebook to create new planar or grid instances.</li> </ul> <p>If you use the code or instances, cite the paper (<a href="https://doi.org/10.1016/j.cor.2024.106756">doi:10.1016/j.cor.2024.106756</a>) and the repository’s <code class="language-plaintext highlighter-rouge">CITATION.cff</code>. Feedback welcome!</p>]]></content><author><name></name></author><category term="blog"/><category term="optimization"/><category term="territory-design"/><category term="vns"/><category term="python"/><summary type="html"><![CDATA[A quick tour of the open-source BVNS + path-relinking toolkit released with our Computers & Operations Research paper on delivery territory design.]]></summary></entry></feed>